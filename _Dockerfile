# Use the official OpenJDK base image
FROM openjdk:20

# Set the working directory in the container
WORKDIR /app

# Copy the Maven executable JAR file and the POM file into the container
COPY target/MeetMate.jar /app/app.jar
COPY pom.xml /app/pom.xml

# Install the PostgreSQL JDBC driver using apk (for Alpine Linux)
RUN mkdir -p /app/libs && \
    curl -o /app/libs/postgresql.jar https://jdbc.postgresql.org/download/postgresql-42.2.23.jar

# Create a directory for application properties
RUN mkdir /app/config
COPY src/main/resources/application.properties /app/config/

# Expose the port that the application will run on
EXPOSE 8080

# Command to run the application
CMD ["java", "-jar", "app.jar"]